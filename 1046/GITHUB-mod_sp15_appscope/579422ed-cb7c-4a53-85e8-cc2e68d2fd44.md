
# Como: implantar configurações de pesquisa personalizada usando o Visual Studio
Aprenda a implantar as configurações de pesquisa personalizada para Suplementos do SharePoint usando Visual Studio.
 * **Aplica-se a:*** 
  
    
    

 **Neste artigo**
  
    
    
 [Pré-requisitos](#Prerequisites)
  
    
    
 [Criar a fonte de consulta e a regra de consulta para pesquisar MSDN](#CreateQuery)
  
    
    
 [Testar a regra de consulta](#TestQuery)
  
    
    
 [Exportar a configuração de pesquisa](#ExportConfig)
  
    
    
 [Implantar a configuração de pesquisa usando o Visual Studio](#Deploy)
  
    
    
 [Verificar a configuração de pesquisa personalizado](#Test)
  
    
    
 [recursos adicionais](#bk_addresources)
Você pode retornar resultados que estão fora do seu domínio normal de pesquisa Personalizando sua configuração de pesquisa para incluir, por exemplo, um site do Centro de pesquisa corporativo. Se você personalizar sua configuração de pesquisa, resultados de destino de fontes externas são exibidos em um bloco de resultado acima dos resultados de outros. Por exemplo, você pode pesquisar "Aplicativos do SharePoint 2013" obter uma lista de tópicos no site do SharePoint que contêm esses termos. Se você personalizar a configuração de pesquisa e, em seguida, procure "MSDN" Além desses termos, MSDN acertos aparecem em um bloco de resultado.
  
    
    

Este artigo explica como estender os resultados de pesquisa, além do site do SharePoint, mas você também pode personalizar sua pesquisa de outras formas. Neste exemplo, você pode definir uma regra de consulta personalizada e uma fonte de consulta do Bing Abrir pesquisa no SharePoint. Quando você inclui uma palavra-chave específica ao final de uma cadeia de caracteres de pesquisa (no caso, **msdn** ), a regra de consulta for acionado, e os resultados MSDN aparecem em um bloco de resultados na parte superior da página de pesquisa. Você pode criar regras de consulta e fontes de consulta mais facilmente usando um designer no SharePoint. Após definir as configurações para a configuração de pesquisa, exportá-los como um único arquivo XML que inclua todas as configurações exportáveis, como configurações de consulta, o modelo de classificação e o esquema. Você importar o arquivo XML para um Suplemento do SharePoint em Visual Studio e usar o Centro de pesquisa corporativo para testar e personalizar o aplicativo. Após verificar que a configuração de pesquisa está funcionando corretamente, você empacotar e implantar o aplicativo e sua configuração de pesquisa no SharePoint.
> [!OBSERVAçãO]
> "Lado-carga" de um aplicativo (ou seja, usar Visual Studio para implantar um aplicativo para um site do SharePoint), você precisa usar os comandos do PowerShell, em vez do modelo de site do Centro de pesquisa corporativo. Consulte  [Iniciar rapidamente para desenvolver aplicativos com a nova experiência do desenvolvedor de 60 "0"](http://blogs.msdn.com/b/officeapps/archive/2013/01/21/quickly-start-developing-apps-with-the-new-0-60-developer-experience.aspx).
  
    
    


## Pré-requisitos
<a name="Prerequisites"> </a>


- Uma instalação local do Visual Studio.
    
  
- Uma instalação local do Office Developer Tools for Visual Studio.
    
  
- Um site de desenvolvedor do SharePoint.
    
  
- Um site do Centro de pesquisa corporativo.
    
  
- Uma assinatura de Office 365, se você estiver desenvolvendo aplicativos para SharePoint no Office 365.
    
  

### Core concepts

Antes de começar esses procedimentos, você deve compreender como as operações de pesquisa no trabalho do SharePoint, como configurar um site de desenvolvedor do SharePoint e como configurar um site do Centro de pesquisa corporativo. Você deve obter essa compreensão examinando os tópicos na tabela a seguir.
  
    
    

**Tabela 1. Principais conceitos para personalizar a pesquisa do SharePoint**


|**Título do artigo**|**Descrição**|
|:-----|:-----|
| [Criar um site do Centro de pesquisa no SharePoint Server 2013](http://go.microsoft.com/fwlink/?LinkId=283972) <br/> |Saiba como criar um site do Centro de pesquisa corporativo e conceder acesso aos usuários. <br/> |
| [Gerenciar regras de consulta no SharePoint Server 2013](http://go.microsoft.com/fwlink/?LinkId=283973) <br/> |Saiba como a melhorar os resultados de pesquisa criando e gerenciando regras de consulta. <br/> |
| [Administrar pesquisa no SharePoint Server 2013](http://go.microsoft.com/fwlink/?LinkId=283974) <br/> |Saiba como aprimorar os resultados de pesquisa e gerenciar o rastreamento, o esquema e a topologia da pesquisa no SharePoint 2013. <br/> |
| [Importação e exportação personalizado definições de configuração de pesquisa no SharePoint Server 2013](http://technet.microsoft.com/en-us/library/jj871675.aspx) <br/> |Saiba como exportar e importar configurações de pesquisa entre sites e conjuntos de sites do SharePoint. <br/> |
   

## Criar a fonte de consulta e a regra de consulta para pesquisar MSDN
<a name="CreateQuery"> </a>

A fonte de consulta indica a URL onde a pesquisa ocorre e o protocolo que ela usa. Nesse caso, ele pesquisará Bing usando o protocolo OpenSearch. A regra de consulta Especifica os critérios para executar a consulta. Nesse caso, as palavras **msdn** ou **MSDN** disparar a consulta.
  
    
    

### Para criar a fonte de consulta do MSDN


1. No site do desenvolvedor do SharePoint, abra a página de **configurações**.
    
  
2. Na seção **Administração do conjunto de sites**, escolha o link de **Fontes de resultados de pesquisa** e escolha o link da **Nova fonte de resultados**.
    
  
3. Na página **Adicionar fonte de resultado**, adicione os seguintes valores de propriedade:
    
   **Tabela 2. Configurações de propriedade para a página Adicionar fonte de resultados**


|**Propriedade**|**Valor**|
|:-----|:-----|
|Nome <br/> |Fonte de consulta do MSDN <br/> |
|Descrição <br/> |Fonte de consulta do MSDN <br/> |
|Protocolo <br/> |OpenSearch 1.0/1.1 [se você escolher essa opção, você atualize a página.] <br/> |
|Source URL <br/> |http://www.bing.com/search?q=site:msdn.microsoft.com+{searchTerms}&amp;format=rss <br/> |
   
4. Escolha a fonte de consulta que você acabou de adicionar e escolha o comando de **Origem de teste** para verificar se a consulta funciona.
    
  

### Para criar a regra de consulta para MSDN


1. Na seção **Administração do conjunto de sites** da página **configurações**, escolha o link de **Regras de consulta de pesquisa**.
    
  
2. Na página **Gerenciar regras de consulta**, escolha o item de lista de **Resultados locais do SharePoint**, como o contexto no qual você deseja configurar a regra de consulta.
    
  
3. Escolha o link de **Nova regra de consulta**.
    
  
4. Na página **Adicionar regra de consulta**, adicione os seguintes valores de propriedade:
    
   **Tabela 3. Configurações de propriedade para a página Adicionar regra de consulta**


|**Propriedade**|**Valor**|
|:-----|:-----|
|Nome da regra <br/> |Regra de consulta do MSDN <br/> |
|Condições de consulta <br/> |Correspondência de texto de consulta avançada <br/> |
|Consulta contém uma dessas frases <br/> |MSDN; MSDN; <br/> |
   
5. Marque a caixa de seleção de **final de correspondências de consulta, mas não toda consulta** e desmarque a caixa de seleção **toda a consulta corresponde à exatamente**.
    
  
6. Escolha o link **Adicionar bloco de resultado**.
    
  
7. Na página **Adicionar bloco de resultado**, adicione os seguintes valores de propriedade. (Deixe as outras propriedades com seus valores atuais.)
    
   **Tabela 4. Configurações de propriedade para a página Adicionar bloco de resultado**


|**Propriedade**|**Valor**|
|:-----|:-----|
|Título do bloco <br/> |Resultados do MSDN para "{subjectTerms}" para o título do bloco <br/> |
|Pesquisar esta fonte <br/> |Fonte de consulta do MSDN <br/> |
|Itens <br/> |5 <br/> |
   
8. Escolha o botão **OK** para criar o bloco de resultado e escolha o botão **Salvar** para criar a regra de consulta do MSDN.
    
  

## Testar a regra de consulta
<a name="TestQuery"> </a>

A origem de consulta e a regra são definidos, isso agora você pode testar os resultados.
  
    
    

### Para testar a regra de consulta


1. Na parte superior esquerdo da página, escolha o ícone de logotipo do SharePoint para navegar até a home page.
    
  
2. Pesquisar msdn de aplicativos do sharepoint 2013e, em seguida, verifique se o bloco de resultado para MSDN aparece na página de resultados.
    
    O bloco é indicado pelo título **Resultados do MSDN para "msdn de aplicativos do sharepoint 2013"** e uma linha no lado esquerdo dos resultados. Outros resultados, se houver, são exibidos em um bloco de resultados.
    
  

## Exportar a configuração de pesquisa
<a name="ExportConfig"> </a>

Após verificar que o funcionamento de bloco de resultado, exportar a configuração de pesquisa em um arquivo XML que você pode importar para Visual Studio.
  
    
    

### Para exportar a configuração de pesquisa


1. Na seção **Administração do conjunto de sites** da página **Definições do Site** no SharePoint, escolha o link **Exportar configuração de pesquisa**.
    
  
2. Salve o arquivo SearchConfiguration.xml.
    
    > [!OBSERVAçãO]
      > Recomendamos que você personalizar a configuração de pesquisa no SharePoint, exportá-lo para um arquivo XML e importe o arquivo em um projeto de configuração de pesquisa no Visual Studio.

## Implantar a configuração de pesquisa usando o Visual Studio
<a name="Deploy"> </a>

Você pode implantar a configuração de pesquisa usando o projeto de configuração de pesquisa no Visual Studio.
  
    
    

### Para implantar a configuração de pesquisa


1. No Visual Studio, crie um aplicativo para um projeto do SharePoint e nomeie o projeto "MSDN Sample de pesquisa".
    
  
2. Na caixa de diálogo **Novo aplicativo para o SharePoint**, defina o tipo de hospedagem como **hospedado no SharePoint** e especifique a URL do site de pesquisa da empresa (onde você habilitou lado de carregamento de aplicativos) para depuração.
    
  
3. Adicione um item de projeto de **Configuração de pesquisa** para o projeto que você acabou de criar.
    
  
4. Na caixa de diálogo **Importar definições de configuração de pesquisa**, navegue até o arquivo SearchConfiguration.xml que você exportou anteriormente.
    
  
5. No arquivo SearchConfigurationSettings.xml, altere o valor do atributo **DeployToParent** como **true**.
    
  
6. No **Solution Explorer**, abra AppManifest.xml no designer de manifesto e escolha a guia **permissões** no designer.
    
  
7. Na guia **permissões**, adicione a seguinte permissão:
    
   **Tabela 5. Configurações de permissão**


|**Propriedade**|**Valor**|
|:-----|:-----|
|Escopo <br/> |Conjunto de Sites <br/> |
|Permissão <br/> |Controle Total <br/> |
   

## Verificar a configuração de pesquisa personalizado
<a name="Test"> </a>

Depois de concluir a personalização a configuração de pesquisa, verifique se a configuração de pesquisa no SharePoint está correta.
  
    
    

### Para verificar a configuração de pesquisa personalizado


1. No Visual Studio, escolha a tecla F5 para depurar o projeto no SharePoint.
    
  
2. No canto superior esquerdo da página, escolha o botão de **Demonstração do Enterprise Search** para navegar na Web de host.
    
  
3. Na seção **Administração do conjunto de sites** da página **Definições do Site** no SharePoint, escolha o link de **Fontes de resultados de pesquisa**.
    
  
4. Escolha o link de **Fonte de consulta do MSDN** para abrir a página de origem de resultado, verifique se a URL de origem é válida e escolha o botão **Salvar**.
    
  
5. Escolha o cabeçalho de **Administração do conjunto de sites** para retornar à página **Configurações** do Site.
    
  
6. Na seção **Administração do conjunto de sites** da página **Definições do Site** no SharePoint, escolha o link de **Regras de consulta de pesquisa**.
    
  
7. Escolha **Resultados locais do SharePoint**, na lista, como a fonte de resultados.
    
  
8. Escolha o link da **Regra de consulta do MSDN** para verificar a regra de consulta.
    
  
9. Na seção de **Blocos de resultados**, escolha o link **Editar**.
    
  
10. Verificar se o bloco de resultados está correto, escolha o botão **OK** e escolha o botão **Salvar**.
    
  
11. No canto superior esquerdo da página, escolha o logotipo do SharePoint para navegar até a home page do aplicativo.
    
  
12. Pesquisar msdn de aplicativos do sharepoint 2013e, em seguida, verifique se o bloco de resultado para MSDN aparece.
    
  
13. Procurar aplicativos do sharepoint 2013e, em seguida, verifique se o bloco de resultado para MSDN não aparece.
    
    Se você omitir **msdn** das palavras-chave de pesquisa, você pode remover o gatilho que cria o bloco de resultados.
    
  
