

# Perguntas freqüentes sobre receptores de eventos do aplicativo
Obtenha respostas para perguntas freqüentes sobre o uso de receptores de eventos do aplicativo em SharePoint 2013.
 * **Aplica-se a:*** 
  
    
    


|||||
|:-----|:-----|:-----|:-----|
|**Neste artigo**                    [Onde posso usar receptores de evento do aplicativo?](#bkmk_WhereCanIUseAER)           [Não consigo encontrar um token de contexto ao abrir uma página da Web](#bkmk_ContextToken)           [Recebo uma mensagem de erro ao instalar um aplicativo](#bkmk_ErrorWhenInstalling)           [Como depurar o receptor de eventos de aplicativo?](#bkmk_HowToDebug)           [Eu recebo um erro quando meu receptor de evento de aplicativo é acionado](#bkmk_ErrorWhenAERFires)           [Quando adiciono um receptor de eventos ao meu aplicativo, é criado um novo AppWeb. É realmente necessário um novo AppWeb apenas tratar um evento?](#bkmk_DoINeedAnAppWebForEachEvent)           [Por que o meu receptor de eventos do aplicativo não é acionado?](#bkmk_AppEventReceiverNotFiring)           [Recursos Adicionais](#bk_addresources) <br/> ||
|**Neste artigo**                    [Onde posso usar receptores de evento do aplicativo?](#bkmk_WhereCanIUseAER)           [Não consigo encontrar um token de contexto ao abrir uma página da Web](#bkmk_ContextToken)           [Recebo uma mensagem de erro ao instalar um aplicativo](#bkmk_ErrorWhenInstalling)           [Como depurar o receptor de eventos de aplicativo?](#bkmk_HowToDebug)           [Eu recebo um erro quando meu receptor de evento de aplicativo é acionado](#bkmk_ErrorWhenAERFires)           [Quando adiciono um receptor de eventos ao meu aplicativo, é criado um novo AppWeb. É realmente necessário um novo AppWeb apenas tratar um evento?](#bkmk_DoINeedAnAppWebForEachEvent)           [Por que o meu receptor de eventos do aplicativo não é acionado?](#bkmk_AppEventReceiverNotFiring)           [Recursos Adicionais](#bk_addresources) <br/> ||
   

Agora, você provavelmente está familiarizado com o recurso de SharePoint 2013 , chamados de receptores de eventos remoto, que permitem que o SharePoint para ser notificado de alterações nos dados contidos fora da instalação do SharePoint. No entanto, há outro tipo de receptor de evento, chamado de um receptor de eventos do aplicativo, que pode ser usado para executar código em vários estágios do ciclo de vida do aplicativo. Receptores de evento do aplicativo podem manipular a três eventos: instalação, desinstalaçãoe atualizado. Consulte  [Lidar com eventos no SharePoint Add-ins](c050d056-8548-4496-a053-016779d723d9.md) para obter mais informações.
  
    
    

A seguir estão as perguntas comuns que você pode ter ao usar receptores de eventos do aplicativo.
## Onde posso usar receptores de evento do aplicativo?
<a name="bkmk_WhereCanIUseAER"> </a>

Receptores de eventos de aplicativo são suportados apenas quando você usá-los em um ambiente somente nuvem de SharePoint Online ou Office 365 .
  
    
    

## Quais são os eventos de aplicativo e quando são acionados?
<a name="bkmk_WhereCanIUseAER"> </a>

Você pode criar manipuladores para os eventos a seguir:
  
    
    

- **Aplicativo instalado:** É executado quando o aplicativo é instalado.
    
  
- **a desinstalação do aplicativo:** Does *não*  executar quando o aplicativo for removido. Remoção de um aplicativo só mover o aplicativo para a Lixeira do usuário. Mais duas etapas são necessárias antes do evento é acionado a desinstalação do aplicativo. Primeiro, um usuário deve remover o aplicativo de sua Lixeira, o que move-lo para a Lixeira de segunda estágio. Em segundo lugar, um usuário deve esvaziar a Lixeira de segunda estágio. Essa última tarefa dispara o evento de desinstalação do aplicativo.
    
  
- **Aplicativo atualizado:** É executado quando o aplicativo for atualizado.
    
  

## Existem limites de horário em quanto tempo meus manipuladores de eventos do aplicativo podem levar para concluir?
<a name="bkmk_WhereCanIUseAER"> </a>

Sim. A implementação do evento aplicativo instalado deve concluir e retornar que um objeto  [SPRemoteEventResult](https://msdn.microsoft.com/library/Microsoft.SharePoint.Client.EventReceivers.SPRemoteEventResult.aspx) em 30 segundos ou a infra-estrutura de instalação do SharePoint pensará que falhou. A infra-estrutura será novamente o evento, *e repita o código desde o início*  , até quatro vezes. Após quatro tempos limite, SharePoint reverterá a instalação do aplicativo inteiro. Recomendamos que as seguintes práticas:
  
    
    

- Se houver qualquer código no seu manipulador não deve ser repetido após um tempo limite, colocá-lo em um bloco condicional que testa para ver se já foi executado. Você deve testar o real componente instalado. Simplesmente definindo uma variável para **true** quando um bloco de código for concluído não funciona como um teste porque todas as variáveis sejam reinicializadas quando o evento expira e é reiniciado.
    
  
- Mova o código de instalação que leva mais de 30 segundos no próprio aplicativo. Você pode adicioná-lo à lógica "primeira execução" que é executado na primeira vez que o aplicativo é iniciado. Como alternativa, o aplicativo pode solicitar que o usuário execute o código de instalação.
    
  
- Se o item com marcador anterior não é viável para seu aplicativo, outra opção é fazer com que o manipulador de eventos iniciar um processo assíncrono remoto e devolver imediatamente um objeto  [SPRemoteEventResult](https://msdn.microsoft.com/library/Microsoft.SharePoint.Client.EventReceivers.SPRemoteEventResult.aspx) . Um ponto fraco dessa estratégia é que se o processo remoto falhar, ele não tem como dizer ao SharePoint para reverter a instalação do aplicativo.
    
  

## Não consigo encontrar um token de contexto ao abrir uma página da Web
<a name="bkmk_ContextToken"> </a>

Se você estiver usando SharePoint 2013 no local, serviço de controle de acesso (ACS)  que é responsável pela geração de tokens  não é usado. Portanto, nenhum token é gerado e ocorrerá um erro. Isso ocorre por design, porque, nesse caso, o SharePoint e o aplicativo estão dentro do mesmo firewall. Isso significa que há uma relação de confiança alta entre eles já.
  
    
    

> [!IMPORTANTE]
> O uso do aplicativo e receptores de evento remoto só é suportado em uma instalação SharePoint Online .
  
    
    


## Recebo uma mensagem de erro ao instalar um aplicativo
<a name="bkmk_ErrorWhenInstalling"> </a>

Ao instalar um aplicativo, você poderá ver os seguintes erros:
  
    
    
 **@"Erro 1
  
    
    
 CorrelationId: fe79ac5a-d462-44c8-be7b-2dc3b9a89689
  
    
    
 ErrorDetail: O texto explicativo receptor de evento remoto falhou.
  
    
    
 ErrorType: transitório
  
    
    
 ErrorTypeName: intermitentes
  
    
    
 ExceptionMessage: não houve nenhum ponto de extremidade escutando em https://localhost:44303/AppEventReceiver.svc pode aceitar a mensagem. Isso geralmente é causado por um endereço incorreto ou ação SOAP. Consulte InnerException, se presente, para obter mais detalhes. Origem: Comum
  
    
    
 SourceName: implementação comum de aplicativo**
  
    
    
ou
  
    
    
 **Nenhum ponto de extremidade de escuta**
  
    
    
Se você receber um desses erros, abra o projeto Visual Studio e localize o arquivo **AppManifest**. Nesse arquivo, altere `~remoteAppUrl` para o URL do aplicativo web real  por exemplo, `https://myapp.onmyserver.com`.
  
    
    

## Como depurar o receptor de eventos de aplicativo?
<a name="bkmk_HowToDebug"> </a>

Consulte  [atualizar a depuração usando o Visual Studio 2012 de eventos remotos do SharePoint 2013](http://blogs.msdn.com/b/officeapps/archive/2013/03/21/update-to-debugging-sharepoint-2013-remote-events-using-visual-studio-2012.aspx).
  
    
    

## Eu recebo um erro quando meu receptor de evento de aplicativo é acionado
<a name="bkmk_ErrorWhenAERFires"> </a>

Quando o receptor de evento de aplicativo é acionado, você poderá ver o seguinte erro:
  
    
    
 **O texto explicativo receptor de evento remoto falhou. Detalhes: O servidor não pôde processar a solicitação devido a um erro interno.**
  
    
    
Para solucionar esse erro, você precisa de mais informações. Você pode aprender mais ativando o  [IncludeExceptionDetailInFaults](https://msdn.microsoft.com/library/System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults.aspx) no servidor para enviar as informações de exceção para o cliente ou ativando o [rastreamento](http://technet.microsoft.com/en-us/library/ee748656.aspx) e verificando os logs de rastreamento de servidor que são gerados.
  
    
    

## Quando adiciono um receptor de eventos ao meu aplicativo, é criado um novo AppWeb. É realmente necessário um novo AppWeb apenas tratar um evento?
<a name="bkmk_DoINeedAnAppWebForEachEvent"> </a>

Sim. Receptores de evento remoto (receptores de evento do aplicativo mesmo) exigem um aplicativo para o código de manipulação de eventos. Para obter mais informações, consulte  [Lidar com eventos no SharePoint Add-ins](c050d056-8548-4496-a053-016779d723d9.md).
  
    
    

## Por que o meu receptor de eventos do aplicativo não é acionado?
<a name="bkmk_AppEventReceiverNotFiring"> </a>

Há várias coisas que você pode fazer para solucionar esse problema.
  
    
    

- É o primeiro lugar para iniciar a solução de problemas nas propriedades do projeto. Procure a seção de **aplicativo para eventos do SharePoint** na janela Propriedades.
    
  
- Em seguida, abra o arquivo AppManifest.xml na visualização de código e procure a seção a seguir.
    
  ```XML
  
<Properties>
<Title>MyAppTitle</Title>
<StartPage>~remoteAppUrl/Pages/Default.aspx?{StandardTokens}</StartPage>
<UninstallingEventEndPoint>~remoteAppUrl/AppEventReceiver.svc</UninstallingEventEndPoint>
<InstalledEventEndpoint>~remoteAppUrl/AppEventReceiver.svc</InstalledEventEndpoint>
</Properties>
  ```


    Certifique-se de que as URLs são escritas aqui mapear para quais URLs deve ser.
    
  

## Recursos Adicionais
<a name="bk_addresources"> </a>


-  [Lidar com eventos no SharePoint Add-ins](c050d056-8548-4496-a053-016779d723d9.md)
    
  
-  [Criar um receptor de evento add-in SharePoint Add-ins](f40c910f-12a2-4caa-8e91-c7a61ae540db.md)
    
  
-  [Depurar e solucionar problemas de um receptor de evento remoto em um SharePoint Add-in](21de092e-27f2-4000-bbb7-cb5cbfeaf195.md)
    
  